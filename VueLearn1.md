# Vueå­¦ä¹ (1)

## ä¸€ã€ä»‹ç»

Vueæ˜¯ä¸€å¥—ç”¨äºæ„å»ºç”¨æˆ·ç•Œé¢çš„æ¸è¿›å¼æ¡†æ¶ã€‚

ç‚¹å‡»æŸ¥çœ‹ï¼š[å®˜æ–¹æ–‡æ¡£](https://cn.vuejs.org/)

## äºŒã€MVVMçš„ä»‹ç»

MVVMï¼Œä¸€ç§æ›´å¥½çš„UIæ¨¡å¼è§£å†³æ–¹æ¡ˆ

### 2.1 MVC
* M: Model æ•°æ®æ¨¡å‹ï¼ˆä¸“é—¨ç”¨æ¥æ“ä½œæ•°æ®ï¼Œæ•°æ®çš„CRUDï¼‰
* Vï¼šView è§†å›¾ï¼ˆå¯¹äºå‰ç«¯æ¥è¯´ï¼Œå°±æ˜¯é¡µé¢ï¼‰
* Cï¼šController æ§åˆ¶å™¨ï¼ˆæ˜¯è§†å›¾å’Œæ•°æ®æ¨¡å‹æ²Ÿé€šçš„æ¡¥æ¢ï¼Œç”¨äºå¤„ç†ä¸šåŠ¡é€»è¾‘ï¼‰

### 2.2 MVVM
* MVVM ===> M / V / VM
* Mï¼šmodelæ•°æ®æ¨¡å‹
* Vï¼šviewè§†å›¾
* VMï¼šViewModel è§†å›¾æ¨¡å‹

### 2.3 ä¼˜åŠ¿å¯¹æ¯”
* MVCæ¨¡å¼ï¼Œå°†åº”ç”¨ç¨‹åºåˆ’åˆ†ä¸ºä¸‰å¤§éƒ¨åˆ†ï¼Œå®ç°äº†èŒè´£åˆ†ç¦»
* åœ¨å‰ç«¯ä¸­ç»å¸¸è¦é€šè¿‡ JSä»£ç  æ¥è¿›è¡Œä¸€äº›é€»è¾‘æ“ä½œï¼Œæœ€ç»ˆè¿˜è¦æŠŠè¿™äº›é€»è¾‘æ“ä½œçš„ç»“æœç°åœ¨é¡µé¢ä¸­ã€‚ä¹Ÿå°±æ˜¯éœ€è¦é¢‘ç¹çš„æ“ä½œDOM
* MVVMé€šè¿‡**æ•°æ®åŒå‘ç»‘å®š**è®©æ•°æ®è‡ªåŠ¨åœ°åŒå‘åŒæ­¥
    * Vï¼ˆä¿®æ”¹æ•°æ®ï¼‰ -> M
    * Mï¼ˆä¿®æ”¹æ•°æ®ï¼‰ -> V
    * æ•°æ®æ˜¯æ ¸å¿ƒ
* Vueè¿™ç§MVVMæ¨¡å¼çš„æ¡†æ¶ï¼Œä¸æ¨èå¼€å‘äººå‘˜æ‰‹åŠ¨æ“ä½œDOM

## ä¸‰ã€å¿«é€Ÿå¼€å§‹

### 3.1 ä¸ä½¿ç”¨è„šæ‰‹æ¶

#### 3.1.1 èµ·æ­¥

æ–°å»º *index.html*
```html
<html>
    <head>
        <!-- å¼•å…¥Vueçš„å¼€å‘ç¯å¢ƒç‰ˆæœ¬ï¼ŒåŒ…å«äº†æœ‰å¸®åŠ©çš„å‘½ä»¤è¡Œè­¦å‘Š -->
        <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
    </head>
    <body>
        <!-- æŒ‡å®švueç®¡ç†å†…å®¹åŒºåŸŸï¼Œéœ€è¦é€šè¿‡vueå±•ç¤ºçš„å†…å®¹éƒ½è¦æ”¾åˆ°æ‰¾ä¸ªå…ƒç´ ä¸­ã€‚é€šå¸¸æˆ‘ä»¬ä¹ŸæŠŠå®ƒå«åšè¾¹ç•Œï¼Œæ•°æ®åªåœ¨è¾¹ç•Œå†…éƒ¨è§£æ-->
        <div id="app">
            {{ message }}
        </div>
        <script src="index.js"></script>
    </body>
</html>
```
æ–°å»º *index.js*
```js
var app = new Vue({
  // elï¼šæä¾›ä¸€ä¸ªåœ¨é¡µé¢ä¸Šå·²å­˜åœ¨çš„ DOM å…ƒç´ ä½œä¸º Vue å®ä¾‹çš„æŒ‚è½½ç›®æ ‡
  el: '#app',
  // Vue å®ä¾‹çš„æ•°æ®å¯¹è±¡ï¼Œç”¨äºç»™ View æä¾›æ•°æ®
  data: {
    message: 'Hello Vue!'
  }
})
```
#### 3.1.2 Vueå®ä¾‹
* å…ˆåœ¨dataä¸­å£°æ˜æ•°æ®ï¼Œå†ä½¿ç”¨æ•°æ®
* å¯ä»¥é€šè¿‡ vm.$data è®¿é—®åˆ°dataä¸­çš„æ‰€æœ‰å±æ€§ï¼Œæˆ–è€… vm.msg
```js
var vm = new Vue({
  data: {
    msg: 'å¤§å®¶å¥½ï¼Œ...'
  }
})

vm.$data.msg === vm.msg // true
```

#### 3.1.3 æ•°æ®ç»‘å®š
* æœ€å¸¸ç”¨çš„æ–¹å¼ï¼šMustache(æ’å€¼è¯­æ³•)ï¼Œä¹Ÿå°±æ˜¯ {{}} è¯­æ³•
* è§£é‡Šï¼š{{}}ä»æ•°æ®å¯¹è±¡dataä¸­è·å–æ•°æ®
* è¯´æ˜ï¼šæ•°æ®å¯¹è±¡çš„å±æ€§å€¼å‘ç”Ÿäº†æ”¹å˜ï¼Œæ’å€¼å¤„çš„å†…å®¹éƒ½ä¼šæ›´æ–°
* è¯´æ˜ï¼š{{}}ä¸­åªèƒ½å‡ºç°JavaScriptè¡¨è¾¾å¼ è€Œä¸èƒ½è§£æjsè¯­å¥
* æ³¨æ„ï¼šMustache è¯­æ³•ä¸èƒ½ä½œç”¨åœ¨ HTML å…ƒç´ çš„å±æ€§ä¸Š
```html
<h1>Hello, {{ msg }}.</h1>
<p>{{ 1 + 2 }}</p>
<p>{{ isOk ? 'yes': 'no' }}</p>

<!-- æ­£ç¡® -->
<div v-bind:title="msg"></div>
<!-- ç®€å†™ -->
<div :title="msg"></div>
<!-- é”™è¯¯ -->
<h1 title="{{ msg }}"></h1>

```
æ›´å¤šç»†èŠ‚ä»¥åŠdemoå¯æŸ¥çœ‹ï¼š[å®˜æ–¹æ–‡æ¡£-èµ·æ­¥](https://cn.vuejs.org/v2/guide/index.html)

### 3.2 ä½¿ç”¨è„šæ‰‹æ¶

#### 3.2.1 é…ç½®å®‰è£…è„šæ‰‹æ¶

##### 3.2.1.1 å®‰è£…æ·˜å®é•œåƒ cnpm

`npm install -g cnpm --registry=https://registry.npm.taobao.org`

##### 3.2.1.2 å…¨å±€å®‰è£… vue-cli 2.x

åˆ°æ”¾é¡¹ç›®çš„ç›®å½•ä¸‹shift+å³é”®æ‰“å¼€å‘½ä»¤è¡Œçª—å£

`cnpm i -g @vue/cli-init`

##### 3.2.1.3 åˆ›å»ºä¸€ä¸ªåŸºäº webpack æ¨¡æ¿çš„æ–°é¡¹ç›®

`vue init webpack vuecli`

ï¼ˆä¸€ç›´å›è½¦ï¼Œåªæœ‰vue-routeré€‰æ‹©yï¼Œå…¶ä»–å‡é€‰æ‹©nï¼‰

##### 3.2.1.4 å®‰è£…ä¾èµ–

`cd vuecli`

`cnpm i`

##### 3.2.1.5 è¿è¡Œé¡¹ç›®

`npm run dev`

æ›´å¤šå®‰è£…ç»†èŠ‚å¯æŸ¥çœ‹ï¼š[æ­å»ºVueè„šæ‰‹æ¶](https://github.com/vectorzero/notes/tree/master/Vue.md)

#### 3.2.2 vueæ–‡ä»¶ä»£ç ç»“æ„
```html
<!-- htmlä»£ç ï¼Œç”±ä¸€ä¸ªtemplateæ ‡ç­¾åŒ…ä½ -->
<template>
    <div class="wrap">
        <p>Hello Vue!</p>
        <button @click="showTime"></button>
        <BtnCurdMethod></BtnCurdMethod>
    </div>
</template>

<!-- javascriptä»£ç  -->
<script>
    import BtnCurdMethod from '@/components/BtnCurdMethod'
    export default {
        // å’Œæ•°æ®ç›¸å…³çš„éƒ½æŒ‚è½½åˆ°dataä¸Š
        data() {
            return {
                msg: 'ä½ å¥½'
            }
        },
        props: {
            'xxArray': {
                type: Array,
                default: function () {
                    return []
                }
            },
            'xxObject': {
                type: Object,
                default: function() {
                    return {}
                }
            },
        },
        components: {
            BtnCurdMethod
        },
        computed() {

        },
        watch() {

        },
        // å’Œæ–¹æ³•ç›¸å…³çš„éƒ½æŒ‚è½½åˆ°methodsä¸Š
        methods: {
            init() {
                console.log('åˆå§‹åŒ–')
            },
            showTime() {
                console.log(this.msg)
            },
            //...
        },
        //ç”Ÿå‘½å‘¨æœŸ
        created() {
            this.init();
        },
        mounted() {
            
        },
        //...
    }
</script>

<!-- css/less/sassä»£ç  -->
<style lang="less" scoped>
    .wrap {
        background: black;
        color: yellow;
    }
</style>
```

## å››ã€çŸ¥è¯†ç‚¹

### 4.1 `export default` & `import`

ç‚¹å‡»æŸ¥çœ‹ï¼š[ECMAScript6 Module çš„è¯­æ³•](http://es6.ruanyifeng.com/#docs/module)

### 4.2 æ•°æ® - `data`
> å½“ä¸€ä¸ª Vue å®ä¾‹è¢«åˆ›å»ºæ—¶ï¼Œå®ƒå‘ Vue çš„å“åº”å¼ç³»ç»Ÿä¸­åŠ å…¥äº†å…¶ data å¯¹è±¡ä¸­èƒ½æ‰¾åˆ°çš„æ‰€æœ‰çš„å±æ€§ã€‚
> å½“è¿™äº›å±æ€§çš„å€¼å‘ç”Ÿæ”¹å˜æ—¶ï¼Œè§†å›¾å°†ä¼šäº§ç”Ÿâ€œå“åº”â€ï¼Œå³åŒ¹é…æ›´æ–°ä¸ºæ–°çš„å€¼ã€‚

æ›´å¤šç»†èŠ‚ä»¥åŠdemoå¯æŸ¥çœ‹:[å®˜æ–¹æ–‡æ¡£-data](https://cn.vuejs.org/v2/api/#data)


### 4.3 ç»„ä»¶ - `components`
>ç»„ä»¶ç³»ç»Ÿæ˜¯ Vue çš„å¦ä¸€ä¸ªé‡è¦æ¦‚å¿µï¼Œå› ä¸ºå®ƒæ˜¯ä¸€ç§æŠ½è±¡ï¼Œå…è®¸æˆ‘ä»¬ä½¿ç”¨å°å‹ã€ç‹¬ç«‹å’Œé€šå¸¸å¯å¤ç”¨çš„ç»„ä»¶æ„å»ºå¤§å‹åº”ç”¨ã€‚ä»”ç»†æƒ³æƒ³ï¼Œå‡ ä¹ä»»æ„ç±»å‹çš„åº”ç”¨ç•Œé¢éƒ½å¯ä»¥æŠ½è±¡ä¸ºä¸€ä¸ªç»„ä»¶æ ‘

#### å­ç»„ä»¶ *child.vue*
```html
<template>
    <!-- template åªèƒ½æœ‰ä¸€ä¸ªæ ¹å…ƒç´  -->
    <div>
        <p>A custom component!</p>
        <p>{{ msg }}</p>
    </div>
</template>
<script>
    export default {
        data() {
            return {
                msg: 'test'
            }
        }
    }
</script>
```

#### çˆ¶ç»„ä»¶ *parent.vue*
```html
<template>
    <div>
        <h2>ç»„ä»¶</h2>
        <child></child>
        <!-- <child/>ç­‰åŒäºğŸ‘‡ -->
        <!--
            <div>
                <p>A custom component!</p>
                <p>test</p>
            </div>
        -->
    </div>
</template>
<script>
    //å¼•å…¥å­ç»„ä»¶
    import child from '@/components/child.vue'
    export default {
        data() {
            return {
                //...
            }
        },
        //æ³¨å†Œç»„ä»¶
        components: ['child']
    }
</script>
```

æ›´å¤šç»†èŠ‚ä»¥åŠdemoå¯æŸ¥çœ‹: [å®˜æ–¹æ–‡æ¡£-components](https://cn.vuejs.org/v2/guide/components.html)

#### çˆ¶ç»„ä»¶æ•°æ® - `props`

 * æ–¹å¼ï¼šé€šè¿‡å­ç»„ä»¶propså±æ€§æ¥ä¼ é€’æ•°æ®
 * æ³¨æ„ï¼šå±æ€§çš„å€¼å¿…é¡»åœ¨ç»„ä»¶ä¸­é€šè¿‡propså±æ€§æ˜¾ç¤ºæŒ‡å®šï¼Œå¦åˆ™ï¼Œä¸ä¼šç”Ÿæ•ˆ
 * è¯´æ˜ï¼šä¼ é€’è¿‡æ¥çš„propså±æ€§çš„ç”¨æ³•ä¸dataå±æ€§çš„ç”¨æ³•ç›¸åŒ

> props å¯ä»¥æ˜¯æ•°ç»„æˆ–å¯¹è±¡ï¼Œç”¨äºæ¥æ”¶æ¥è‡ªçˆ¶ç»„ä»¶çš„æ•°æ®ã€‚
> props å¯ä»¥æ˜¯ç®€å•çš„æ•°ç»„ï¼Œæˆ–è€…ä½¿ç”¨å¯¹è±¡ä½œä¸ºæ›¿ä»£ï¼Œå¯¹è±¡å…è®¸é…ç½®é«˜çº§é€‰é¡¹ï¼Œå¦‚ç±»å‹æ£€æµ‹ã€è‡ªå®šä¹‰æ ¡éªŒå’Œè®¾ç½®é»˜è®¤å€¼ã€‚

æ›´å¤šç»†èŠ‚ä»¥åŠdemoå¯æŸ¥çœ‹ï¼š[å®˜æ–¹æ–‡æ¡£-props](https://cn.vuejs.org/v2/api/#props)

#### ç»„ä»¶é€šè®¯ todo

### 4.4 ç›‘è§†æ•°æ®å˜åŒ– - `watch`

* æ¦‚è¿°ï¼šwatchæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œé”®æ˜¯éœ€è¦è§‚å¯Ÿçš„è¡¨è¾¾å¼ï¼Œå€¼æ˜¯å¯¹åº”å›è°ƒå‡½æ•°
* ä½œç”¨ï¼šå½“è¡¨è¾¾å¼çš„å€¼å‘ç”Ÿå˜åŒ–åï¼Œä¼šè°ƒç”¨å¯¹åº”çš„å›è°ƒå‡½æ•°å®Œæˆå“åº”çš„ç›‘è§†æ“ä½œ
```js
new Vue({
  data: { a: 1, b: { age: 10 } },
  watch: {
    a: function(val, oldVal) {
      // val è¡¨ç¤ºå½“å‰å€¼
      // oldVal è¡¨ç¤ºæ—§å€¼
      console.log('å½“å‰å€¼ä¸ºï¼š' + val, 'æ—§å€¼ä¸ºï¼š' + oldVal)
    },

    // ç›‘å¬å¯¹è±¡å±æ€§çš„å˜åŒ–
    b: {
      handler: function (val, oldVal) { /* ... */ },
      // deep : trueè¡¨ç¤ºæ˜¯å¦ç›‘å¬å¯¹è±¡å†…éƒ¨å±æ€§å€¼çš„å˜åŒ– 
      deep: true
    },

    // åªç›‘è§†userå¯¹è±¡ä¸­ageå±æ€§çš„å˜åŒ–
    'user.age': function (val, oldVal) {

    },
  }
})
```

æ›´å¤šç»†èŠ‚ä»¥åŠdemoå¯æŸ¥çœ‹ï¼š[å®˜æ–¹æ–‡æ¡£-watch](https://cn.vuejs.org/v2/api/#watch)
     
### 4.5 è®¡ç®—å±æ€§ - `computed`

* è¯´æ˜ï¼šè®¡ç®—å±æ€§æ˜¯åŸºäºå®ƒä»¬çš„ä¾èµ–è¿›è¡Œç¼“å­˜çš„ï¼Œåªæœ‰åœ¨å®ƒçš„ä¾èµ–å‘ç”Ÿæ”¹å˜æ—¶æ‰ä¼šé‡æ–°æ±‚å€¼
* æ³¨æ„ï¼šMustacheè¯­æ³•ï¼ˆ{{}}ï¼‰ä¸­ä¸è¦æ”¾å…¥å¤ªå¤šçš„é€»è¾‘ï¼Œå¦åˆ™ä¼šè®©æ¨¡æ¿è¿‡é‡ã€éš¾ä»¥ç†è§£å’Œç»´æŠ¤
* æ³¨æ„ï¼šcomputedä¸­çš„å±æ€§ä¸èƒ½ä¸dataä¸­çš„å±æ€§åŒåï¼Œå¦åˆ™ä¼šæŠ¥é”™

```js
var vm = new Vue({
  el: '#app',
  data: {
    firstname: 'jack',
    lastname: 'rose'
  },
  computed: {
    fullname() {
      return this.firstname + '.' + this.lastname
    }
  }
})
```

æ›´å¤šç»†èŠ‚ä»¥åŠdemoå¯æŸ¥çœ‹ï¼š[å®˜æ–¹æ–‡æ¡£-computed](https://cn.vuejs.org/v2/api/#computed)

### 4.6 ç”Ÿå‘½å‘¨æœŸ

ä¸€ä¸ªç»„ä»¶ä»å¼€å§‹åˆ°æœ€åæ¶ˆäº¡æ‰€ç»å†çš„å„ç§çŠ¶æ€ï¼Œå°±æ˜¯ä¸€ä¸ªç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸã€‚

ç”Ÿå‘½å‘¨æœŸé’©å­å‡½æ•°ï¼š

*beforeCreate()*ã€*created()*ã€*beforeMounted()*ã€*mounted()*ã€*beforeUpdated()*ã€*updated()*ã€*beforeDestroy()*ã€*destroyed()*

ç”Ÿå‘½å‘¨æœŸé’©å­å‡½æ•°çš„å®šä¹‰ï¼šä»ç»„ä»¶è¢«åˆ›å»ºï¼Œåˆ°ç»„ä»¶æŒ‚è½½åˆ°é¡µé¢ä¸Šè¿è¡Œï¼Œå†åˆ°é¡µé¢å…³é—­ç»„ä»¶è¢«å¸è½½ï¼Œè¿™ä¸‰ä¸ªé˜¶æ®µæ€»æ˜¯ä¼´éšç€ç»„ä»¶å„ç§å„æ ·çš„äº‹ä»¶ï¼Œè¿™äº›äº‹ä»¶ï¼Œç»Ÿç§°ä¸ºç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°ï¼

> ä¸è¦åœ¨é€‰é¡¹å±æ€§æˆ–å›è°ƒä¸Šä½¿ç”¨ç®­å¤´å‡½æ•°ï¼Œæ¯”å¦‚ created: () => console.log(this.a) æˆ– vm.$watch('a', newValue => this.myMethod())ã€‚å› ä¸ºç®­å¤´å‡½æ•°æ˜¯å’Œçˆ¶çº§ä¸Šä¸‹æ–‡ç»‘å®šåœ¨ä¸€èµ·çš„ï¼Œthis ä¸ä¼šæ˜¯å¦‚ä½ æ‰€é¢„æœŸçš„ Vue å®ä¾‹ï¼Œç»å¸¸å¯¼è‡´ Uncaught TypeError: Cannot read property of undefined æˆ– Uncaught TypeError: this.myMethod is not a function ä¹‹ç±»çš„é”™è¯¯ã€‚

![avatar](https://cn.vuejs.org/images/lifecycle.png)

`beforeCreate()`

è¯´æ˜ï¼šåœ¨å®ä¾‹åˆå§‹åŒ–ä¹‹åï¼Œæ•°æ®è§‚æµ‹ (data observer) å’Œ event/watcher äº‹ä»¶é…ç½®ä¹‹å‰è¢«è°ƒç”¨

æ³¨æ„ï¼šæ­¤æ—¶ï¼Œæ— æ³•è·å– dataä¸­çš„æ•°æ®ã€methodsä¸­çš„æ–¹æ³•

`created()`

æ³¨æ„ï¼šè¿™æ˜¯ä¸€ä¸ªå¸¸ç”¨çš„ç”Ÿå‘½å‘¨æœŸï¼Œå¯ä»¥è°ƒç”¨methodsä¸­çš„æ–¹æ³•ã€æ”¹å˜dataä¸­çš„æ•°æ®

ä½¿ç”¨åœºæ™¯ï¼šå‘é€è¯·æ±‚è·å–æ•°æ®

`beforeMounted()`

è¯´æ˜ï¼šåœ¨æŒ‚è½½å¼€å§‹ä¹‹å‰è¢«è°ƒç”¨

`mounted()`

è¯´æ˜ï¼šæ­¤æ—¶ï¼Œvueå®ä¾‹å·²ç»æŒ‚è½½åˆ°é¡µé¢ä¸­ï¼Œå¯ä»¥è·å–åˆ°elä¸­çš„DOMå…ƒç´ ï¼Œè¿›è¡ŒDOMæ“ä½œ

`beforeUpdated()`

è¯´æ˜ï¼šæ•°æ®æ›´æ–°æ—¶è°ƒç”¨ï¼Œå‘ç”Ÿåœ¨è™šæ‹Ÿ DOM é‡æ–°æ¸²æŸ“å’Œæ‰“è¡¥ä¸ä¹‹å‰ã€‚ä½ å¯ä»¥åœ¨è¿™ä¸ªé’©å­ä¸­è¿›ä¸€æ­¥åœ°æ›´æ”¹çŠ¶æ€ï¼Œè¿™ä¸ä¼šè§¦å‘é™„åŠ çš„é‡æ¸²æŸ“è¿‡ç¨‹

æ³¨æ„ï¼šæ­¤å¤„è·å–çš„æ•°æ®æ˜¯æ›´æ–°åçš„æ•°æ®ï¼Œä½†æ˜¯è·å–é¡µé¢ä¸­çš„DOMå…ƒç´ æ˜¯æ›´æ–°ä¹‹å‰çš„

`updated()`

è¯´æ˜ï¼šç»„ä»¶ DOM å·²ç»æ›´æ–°ï¼Œæ‰€ä»¥ä½ ç°åœ¨å¯ä»¥æ‰§è¡Œä¾èµ–äº DOM çš„æ“ä½œ

`beforeDestroy()`

è¯´æ˜ï¼šå®ä¾‹é”€æ¯ä¹‹å‰è°ƒç”¨ã€‚åœ¨è¿™ä¸€æ­¥ï¼Œå®ä¾‹ä»ç„¶å®Œå…¨å¯ç”¨

ä½¿ç”¨åœºæ™¯ï¼šå®ä¾‹é”€æ¯ä¹‹å‰ï¼Œæ‰§è¡Œæ¸…ç†ä»»åŠ¡ï¼Œæ¯”å¦‚ï¼šæ¸…é™¤å®šæ—¶å™¨ç­‰

`destroyed()`

è¯´æ˜ï¼šVue å®ä¾‹é”€æ¯åè°ƒç”¨ã€‚è°ƒç”¨åï¼ŒVue å®ä¾‹æŒ‡ç¤ºçš„æ‰€æœ‰ä¸œè¥¿éƒ½ä¼šè§£ç»‘å®šï¼Œæ‰€æœ‰çš„äº‹ä»¶ç›‘å¬å™¨ä¼šè¢«ç§»é™¤ï¼Œæ‰€æœ‰çš„å­å®ä¾‹ä¹Ÿä¼šè¢«é”€æ¯ã€‚

æ›´å¤šç»†èŠ‚ä»¥åŠdemoå¯æŸ¥çœ‹ï¼š[å®˜æ–¹æ–‡æ¡£-é€‰é¡¹ / ç”Ÿå‘½å‘¨æœŸé’©å­](https://cn.vuejs.org/v2/api/#%E9%80%89%E9%A1%B9-%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E9%92%A9%E5%AD%90)

### 4.7 æŒ‡ä»¤
* è§£é‡Šï¼šæŒ‡ä»¤ (Directives) æ˜¯å¸¦æœ‰ v- å‰ç¼€çš„ç‰¹æ®Šå±æ€§
* ä½œç”¨ï¼šå½“è¡¨è¾¾å¼çš„å€¼æ”¹å˜æ—¶ï¼Œå°†å…¶äº§ç”Ÿçš„è¿å¸¦å½±å“ï¼Œå“åº”å¼åœ°ä½œç”¨äº DOM

#### 4.7.1 [æ¨¡æ¿è¯­æ³•](https://cn.vuejs.org/v2/guide/syntax.html)

* `v-text`
    * è§£é‡Šï¼šæ›´æ–°DOMå¯¹è±¡çš„ textContent
```html
<h1 v-text="msg"></h1>
<!-- ç­‰åŒäº -->
<h1>{{ msg }}</h1>
```

* `v-html`
    * è§£é‡Šï¼šæ›´æ–°DOMå¯¹è±¡çš„ innerHTML
```html
<h1 v-html="msg"></h1>
```
   
* `v-bind`
    * ä½œç”¨ï¼šå½“è¡¨è¾¾å¼çš„å€¼æ”¹å˜æ—¶ï¼Œå°†å…¶äº§ç”Ÿçš„è¿å¸¦å½±å“ï¼Œå“åº”å¼åœ°ä½œç”¨äº DOM
    * è¯­æ³•ï¼šv-bind:title="msg"
    * ç®€å†™ï¼š:title="msg"
```html
<!-- å®Œæ•´è¯­æ³• -->
<a v-bind:href="url"></a>
<!-- ç¼©å†™ -->
<a :href="url"></a>
```

#### 4.7.2 [æ¡ä»¶æ¸²æŸ“](https://cn.vuejs.org/v2/guide/conditional.html)

* `v-if`,`v-show`
    * v-ifï¼šæ ¹æ®è¡¨è¾¾å¼çš„å€¼çš„çœŸå‡æ¡ä»¶ï¼Œé”€æ¯æˆ–é‡å»ºå…ƒç´ 
    * v-showï¼šæ ¹æ®è¡¨è¾¾å¼ä¹‹çœŸå‡å€¼ï¼Œåˆ‡æ¢å…ƒç´ çš„displayå±æ€§
```html
<p v-show="isShow">è¿™ä¸ªå…ƒç´ å±•ç¤ºå‡ºæ¥äº†å—ï¼Ÿï¼Ÿï¼Ÿ</p>
<p v-if="isShow">è¿™ä¸ªå…ƒç´ ï¼Œåœ¨HTMLç»“æ„ä¸­å—ï¼Ÿï¼Ÿï¼Ÿ</p>
```

#### 4.7.3 [åˆ—è¡¨æ¸²æŸ“](https://cn.vuejs.org/v2/guide/list.html)

* `v-for`
    * ä½œç”¨ï¼šåŸºäºæºæ•°æ®å¤šæ¬¡æ¸²æŸ“å…ƒç´ æˆ–æ¨¡æ¿å—
```html
<!-- åŸºç¡€ç”¨æ³• -->
<div v-for="item in items">
  {{ item.text }}
</div>

<!-- item ä¸ºå½“å‰é¡¹ï¼Œindex ä¸ºç´¢å¼• -->
<p v-for="(item, index) in list">{{item}} -- {{index}}</p>
<!-- item ä¸ºå€¼ï¼Œkey ä¸ºé”®ï¼Œindex ä¸ºç´¢å¼• -->
<p v-for="(item, key, index) in obj">{{item}} -- {{key}}</p>
<p v-for="item in 10">{{item}}</p>
```

#### 4.7.4 [äº‹ä»¶å¤„ç†](https://cn.vuejs.org/v2/guide/events.html)

* `v-on`
    * ä½œç”¨ï¼šç»‘å®šäº‹ä»¶
    * è¯­æ³•ï¼šv-on:click="say" or v-on:click="say('å‚æ•°', $event)"
    * ç®€å†™ï¼š@click="say"
    * è¯´æ˜ï¼šç»‘å®šçš„äº‹ä»¶å®šä¹‰åœ¨methods
```html
<!-- å®Œæ•´è¯­æ³• -->
<a v-on:click="doSomething"></a>
<!-- ç¼©å†™ -->
<a @click="doSomething"></a>
```

* äº‹ä»¶ä¿®é¥°ç¬¦
    * `.stop` é˜»æ­¢å†’æ³¡ï¼Œè°ƒç”¨ event.stopPropagation()
    * `.prevent` é˜»æ­¢é»˜è®¤è¡Œä¸ºï¼Œè°ƒç”¨ event.preventDefault()
    * `.capture` æ·»åŠ äº‹ä»¶ä¾¦å¬å™¨æ—¶ä½¿ç”¨äº‹ä»¶æ•è·æ¨¡å¼
    * `.self` åªå½“äº‹ä»¶åœ¨è¯¥å…ƒç´ æœ¬èº«ï¼ˆæ¯”å¦‚ä¸æ˜¯å­å…ƒç´ ï¼‰è§¦å‘æ—¶ï¼Œæ‰ä¼šè§¦å‘äº‹ä»¶
    * `.once` äº‹ä»¶åªè§¦å‘ä¸€æ¬¡

* `v-model`
    * ä½œç”¨ï¼šåœ¨è¡¨å•å…ƒç´ ä¸Šåˆ›å»ºåŒå‘æ•°æ®ç»‘å®š
    * è¯´æ˜ï¼šç›‘å¬ç”¨æˆ·çš„è¾“å…¥äº‹ä»¶ä»¥æ›´æ–°æ•°æ®
    * æ¡ˆä¾‹ï¼šè®¡ç®—å™¨
```html
<input type="text" v-model="message" placeholder="edit me">
<p>Message is: {{ message }}</p>
```

#### 4.7.5 [è‡ªå®šä¹‰æŒ‡ä»¤](https://cn.vuejs.org/v2/guide/custom-directive.html)

* ä½œç”¨ï¼šè¿›è¡ŒDOMæ“ä½œ
* ä½¿ç”¨åœºæ™¯ï¼šå¯¹çº¯ DOM å…ƒç´ è¿›è¡Œåº•å±‚æ“ä½œï¼Œæ¯”å¦‚ï¼šæ–‡æœ¬æ¡†è·å¾—ç„¦ç‚¹
* vue è‡ªå®šä¹‰æŒ‡ä»¤ç”¨æ³•å®ä¾‹

å…¨å±€è‡ªå®šä¹‰æŒ‡ä»¤
```js
// ç¬¬ä¸€ä¸ªå‚æ•°ï¼šæŒ‡ä»¤åç§°
// ç¬¬äºŒä¸ªå‚æ•°ï¼šé…ç½®å¯¹è±¡ï¼ŒæŒ‡å®šæŒ‡ä»¤çš„é’©å­å‡½æ•°
Vue.directive('directiveName', {
  // bindä¸­åªèƒ½å¯¹å…ƒç´ è‡ªèº«è¿›è¡ŒDOMæ“ä½œï¼Œè€Œæ— æ³•å¯¹çˆ¶çº§å…ƒç´ æ“ä½œ
  // åªè°ƒç”¨ä¸€æ¬¡ æŒ‡ä»¤ç¬¬ä¸€æ¬¡ç»‘å®šåˆ°å…ƒç´ æ—¶è°ƒç”¨ã€‚åœ¨è¿™é‡Œå¯ä»¥è¿›è¡Œä¸€æ¬¡æ€§çš„åˆå§‹åŒ–è®¾ç½®ã€‚
  bind( elï¼Œbinding, vnode ) {
    // å‚æ•°è¯¦è§£
    // elï¼šæŒ‡ä»¤æ‰€ç»‘å®šçš„å…ƒç´ ï¼Œå¯ä»¥ç”¨æ¥ç›´æ¥æ“ä½œ DOM ã€‚
    // bindingï¼šä¸€ä¸ªå¯¹è±¡ï¼ŒåŒ…å«ä»¥ä¸‹å±æ€§ï¼š
      // nameï¼šæŒ‡ä»¤åï¼Œä¸åŒ…æ‹¬ v- å‰ç¼€ã€‚
      // valueï¼šæŒ‡ä»¤çš„ç»‘å®šå€¼ï¼Œç­‰å·åé¢çš„å€¼ ã€‚
      // oldValueï¼šæŒ‡ä»¤ç»‘å®šçš„å‰ä¸€ä¸ªå€¼ï¼Œä»…åœ¨ update å’Œ componentUpdated é’©å­ä¸­å¯ç”¨ã€‚æ— è®ºå€¼æ˜¯å¦æ”¹å˜éƒ½å¯ç”¨ã€‚
      // expressionï¼šå­—ç¬¦ä¸²å½¢å¼çš„æŒ‡ä»¤è¡¨è¾¾å¼ ç­‰å·åé¢çš„å­—ç¬¦ä¸² å½¢å¼
      // argï¼šä¼ ç»™æŒ‡ä»¤çš„å‚æ•°ï¼Œå¯é€‰ã€‚ä¾‹å¦‚ v-my-directive:foo ä¸­ï¼Œå‚æ•°ä¸º "foo"ã€‚
      // modifiersï¼šæŒ‡ä»¤ä¿®é¥°ç¬¦ã€‚ä¾‹å¦‚ï¼šv-directive.foo.barä¸­ï¼Œä¿®é¥°ç¬¦å¯¹è±¡ä¸º { foo: true, bar: true }ã€‚
    // vnodeï¼šVue ç¼–è¯‘ç”Ÿæˆçš„è™šæ‹ŸèŠ‚ç‚¹ã€‚ã€‚
    // oldVnodeï¼šä¸Šä¸€ä¸ªè™šæ‹ŸèŠ‚ç‚¹ï¼Œä»…åœ¨ update å’Œ componentUpdated é’©å­ä¸­å¯ç”¨ã€‚
  },
  // insertedè¿™ä¸ªé’©å­å‡½æ•°è°ƒç”¨çš„æ—¶å€™ï¼Œå½“å‰å…ƒç´ å·²ç»æ’å…¥é¡µé¢ä¸­äº†ï¼Œä¹Ÿå°±æ˜¯è¯´å¯ä»¥è·å–åˆ°çˆ¶çº§èŠ‚ç‚¹äº†
  inserted (  elï¼Œbinding, vnode ) {},
  //  DOMé‡æ–°æ¸²æŸ“å‰
  update(elï¼Œbinding, vnode,oldVnode) {},
  // DOMé‡æ–°æ¸²æŸ“å
  componentUpdated ( elï¼Œbinding, vnode,oldVnode ) {},
  // åªè°ƒç”¨ä¸€æ¬¡ï¼ŒæŒ‡ä»¤ä¸å…ƒç´ è§£ç»‘æ—¶è°ƒç”¨
  unbind ( el ) {
    // æŒ‡ä»¤æ‰€åœ¨çš„å…ƒç´ åœ¨é¡µé¢ä¸­æ¶ˆå¤±ï¼Œè§¦å‘
  }
})
// ç®€å†™ å¦‚æœä½ æƒ³åœ¨ bind å’Œ update æ—¶è§¦å‘ç›¸åŒè¡Œä¸ºï¼Œè€Œä¸å…³å¿ƒå…¶å®ƒçš„é’©å­:
Vue.directive('è‡ªå®šä¹‰æŒ‡ä»¤å', function( el, binding ) {})
// ä¾‹ï¼š
Vue.directive('color', function(el, binding) {
  el.style.color = binging.value
})
```

å±€éƒ¨è‡ªå®šä¹‰æŒ‡ä»¤
```js
var vm = new Vue({
  el : "#app",
  directives: {
    directiveName: { }
  }
})
```

æ›´å¤šç»†èŠ‚ä»¥åŠdemoå¯æŸ¥çœ‹ï¼š[å®˜æ–¹æ–‡æ¡£-æŒ‡ä»¤](https://cn.vuejs.org/v2/api/#%E6%8C%87%E4%BB%A4)

### 4.8 æ ·å¼å¤„ç† - classå’Œstyle

```js
    data() {
        return {
            isActive: true,
            errorClassï¼š 'error-class',
            activeColor: 'yellow',
            fontSize: 12,
            baseStyles: {
                //cssæ ·å¼
            },
            overridingStyles: {
                //cssæ ·å¼
            },
        }
    }
```

```html
<!-- class -->
<div v-bind:class="{ active: isActive }"></div>
<!-- isActiveä¸ºtrue,ç­‰åŒäºğŸ‘‡ -->
<div class="active"></div>

<div :class="['active', 'text-danger']"></div>
<!-- ç­‰åŒäºğŸ‘‡ -->
<div class="active text-danger"></div>

<div v-bind:class="[{ active: isActive }, errorClass]"></div>
<!-- isActiveä¸ºtrue,errorClassçš„å€¼ä¸º'error-class',ç­‰åŒäºğŸ‘‡ -->
<div class="active error-class"></div>

<!-- style -->
<div :style="{ color: activeColor, 'font-size': fontSize + 'px' }"></div>
<!-- activeColorä¸º'yellow',fontSizeä¸º12,ç­‰åŒäºğŸ‘‡ -->
<div style="color: yellow; font-size: 12px "></div>

<!-- 2 å°†å¤šä¸ª æ ·å¼å¯¹è±¡ åº”ç”¨åˆ°ä¸€ä¸ªå…ƒç´ ä¸Š-->
<!-- baseStyles å’Œ overridingStyles éƒ½æ˜¯dataä¸­å®šä¹‰çš„å¯¹è±¡ -->
<div :style="[baseStyles, overridingStyles]"></div>
```

æ›´å¤šç»†èŠ‚ä»¥åŠdemoå¯æŸ¥çœ‹ï¼š[å®˜æ–¹æ–‡æ¡£-Class ä¸ Style ç»‘å®š](https://cn.vuejs.org/v2/guide/class-and-style.html)

